{% extends "base.html" %}

{% block title %}
Reporte de Ventas Premium y Ventas de Publicaciones
{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center text-white mb-4">Reporte de Ventas - Este Mes</h1>

    <!-- Mostrar el resumen -->
    <div class="row text-white mb-4">
        <div class="col-md-6">
            <h4>Total de Ventas Premium: <span class="text-success">{{ total_ventas_premium }}</span></h4>
        </div>
        <div class="col-md-6">
            <h4>Total de Dinero Recibido por Ventas Premium: <span class="text-success">${{ total_monto_premium }}</span></h4>
        </div>
    </div>

    <!-- Tabla de ventas Premium -->
    <h3 class="text-white">Ventas Premium</h3>
    <table class="table table-dark table-hover table-bordered mt-4">
        <thead class="thead-light">
            <tr>
                <th>#</th>
                <th>Técnico</th>
                <th>Cantidad de Pago</th>
                <th>Fecha de Pago</th>
                <th>Fecha de Caducidad</th>
            </tr>
        </thead>
        <tbody>
            {% for venta in ventas_premium_mes %}
            <tr>
                <td>{{ venta.id }}</td>
                <td>{{ venta.tecnico.username }}</td>
                <td>${{ venta.cantidad_pago }}</td>
                <td>{{ venta.fecha|date:"d/m/Y H:i" }}</td>
                <td>{{ venta.fecha_caducidad|date:"d/m/Y" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Mostrar el resumen de las ventas de publicaciones -->
    <div class="row text-white mb-4 mt-5">
        <div class="col-md-6">
            <h4>Total de Ventas de Publicaciones: <span class="text-success">{{ total_ventas_publicaciones }}</span></h4>
        </div>
        <div class="col-md-6">
            <h4>Total de Dinero Recibido por Ventas de Publicaciones: <span class="text-success">${{ total_monto_publicaciones }}</span></h4>
        </div>
    </div>

    <!-- Tabla de ventas de publicaciones -->
    <h3 class="text-white">Ventas de Publicaciones</h3>
    <table class="table table-dark table-hover table-bordered mt-4">
        <thead class="thead-light">
            <tr>
                <th>#</th>
                <th>Técnico</th>
                <th>Cantidad de Pago</th>
                <th>Fecha de Pago</th>
                <th>Publicación</th>
            </tr>
        </thead>
        <tbody>
            {% for venta in ventas_publicaciones_mes %}
            <tr>
                <td>{{ venta.id }}</td>
                <td>{{ venta.tecnico.nombre }}</td>
                <td>${{ venta.monto_pagado }}</td>
                <td>{{ venta.fecha|date:"d/m/Y H:i" }}</td>
                <td>{{ venta.publicacion.titulo }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
